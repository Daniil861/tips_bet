(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",5e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".main")&&(sessionStorage.getItem("current-bet")||sessionStorage.setItem("current-bet",500),document.querySelectorAll(".bet-main__input").forEach((e=>{e.value==+sessionStorage.getItem("current-bet")&&(e.checked=!0)})));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=document.documentElement.clientHeight,n=document.documentElement.clientWidth;let c=document.querySelectorAll(".bet-main__input");function l(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function m(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function i(e,t){return Math.floor(Math.random()*(t-e)+e)}function a(e,t,o,s){let n=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",n),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}let r=document.querySelectorAll(".icon-anim img");function d(){let e=+document.querySelector(".level__point_1").innerHTML,t=+document.querySelector(".level__point_2").innerHTML;document.querySelector(".level__frame-current").style.width=e/t*100+"%"}document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=i(0,4),t=["jump","scale","rotate","rotate-2"],o=i(0,r.length);r.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")?e.classList.remove("_anim-icon-rotate"):e.classList.contains("_anim-icon-rotate-2")&&e.classList.remove("_anim-icon-rotate-2")})),setTimeout((()=>{r[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4),document.querySelector(".level")&&d(),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active");const u=2900,g=3900;document.querySelector(".shop")&&(document.querySelector(".shop__cost_bomb").textContent=u,document.querySelector(".shop__cost_magnite").textContent=g,sessionStorage.getItem("bomb")||sessionStorage.setItem("bomb",0),sessionStorage.getItem("magnite")||sessionStorage.setItem("magnite",0));const _={row:0,col:0,pin:0};function y(){sessionStorage.setItem("bet-1",0),sessionStorage.setItem("coeff-bet-1",0),sessionStorage.setItem("bet-2",0),sessionStorage.setItem("coeff-bet-2",0),sessionStorage.setItem("bet-3",0),sessionStorage.setItem("coeff-bet-3",0),sessionStorage.setItem("bet-4",0),sessionStorage.setItem("coeff-bet-4",0),sessionStorage.setItem("bet-5",0),sessionStorage.setItem("coeff-bet-5",0),sessionStorage.setItem("candy-1",0),sessionStorage.setItem("candy-2",0),sessionStorage.setItem("candy-3",0),sessionStorage.setItem("candy-4",0),sessionStorage.setItem("candy-5",0),document.querySelectorAll(".candy-score__block").forEach((e=>{e.classList.contains("_hide")||e.classList.add("_hide")})),document.querySelectorAll(".candy-score__count").forEach((e=>{e.classList.contains("_hide")||e.classList.add("_hide")})),S(),f()}function S(e){1==e?+sessionStorage.getItem("candy-1")>0&&(I(1),+sessionStorage.getItem("candy-1")>9&&setTimeout((()=>{document.querySelector(".candy-score__count_1").classList.remove("_hide")}),2e3)):2==e?+sessionStorage.getItem("candy-2")>0&&(I(2),+sessionStorage.getItem("candy-2")>9&&setTimeout((()=>{document.querySelector(".candy-score__count_2").classList.remove("_hide")}),2e3)):3==e?+sessionStorage.getItem("candy-3")>0&&(I(3),+sessionStorage.getItem("candy-3")>9&&setTimeout((()=>{document.querySelector(".candy-score__count_3").classList.remove("_hide")}),2e3)):4==e?+sessionStorage.getItem("candy-4")>0&&(I(4),+sessionStorage.getItem("candy-4")>9&&setTimeout((()=>{document.querySelector(".candy-score__count_4").classList.remove("_hide")}),2e3)):5==e&&+sessionStorage.getItem("candy-5")>0&&(I(5),+sessionStorage.getItem("candy-5")>9&&setTimeout((()=>{document.querySelector(".candy-score__count_5").classList.remove("_hide")}),2e3))}function I(e){let t=sessionStorage.getItem(`candy-${e}`),o=0,s=0;if(+t>9?(o=t.split(""),sessionStorage.setItem(`coeff-bet-${e}`,o[0]),s=o[1]):(sessionStorage.setItem(`coeff-bet-${e}`,0),s=+t),setTimeout((()=>{document.querySelector(`.candy-score__count_${e}`).textContent=sessionStorage.getItem(`coeff-bet-${e}`)}),2e3),t>9){console.log("count больше 9");let o=+sessionStorage.getItem("current-destroy-candys");if(t-o<10)console.log("До добавления было меньше 10"),document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{e.classList.contains("_hide")&&e.classList.remove("_hide")})),setTimeout((()=>{document.querySelectorAll(`.candy-score__block_${e}`).forEach((e=>e.classList.add("_hide"))),document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{t<=s-1&&e.classList.remove("_hide")}))}),2500);else{console.log("До добавления уже было больше 10");let n=String(t-o).split("")[0],c=String(t).split("")[0];console.log(`decadeAfter - ${c}`),console.log(`decadeBefore - ${n}`),+c>+n?(console.log("Сменился десяток"),document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{e.classList.contains("_hide")&&e.classList.remove("_hide")})),setTimeout((()=>{document.querySelectorAll(`.candy-score__block_${e}`).forEach((e=>e.classList.add("_hide"))),document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{t<=s-1&&e.classList.remove("_hide")}))}),2500)):(console.log("Десяток не сменился"),document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{t<=s-1&&e.classList.remove("_hide")})))}}else document.querySelectorAll(`.candy-score__block_${e}`).forEach(((e,t)=>{t<=s-1&&e.classList.remove("_hide")}));1==e?sessionStorage.setItem("bet-1",.5*sessionStorage.getItem("coeff-bet-1")):2==e?sessionStorage.setItem("bet-2",1*sessionStorage.getItem("coeff-bet-2")):3==e?sessionStorage.setItem("bet-3",2*sessionStorage.getItem("coeff-bet-3")):4==e?sessionStorage.setItem("bet-4",5*sessionStorage.getItem("coeff-bet-4")):5==e&&sessionStorage.setItem("bet-5",10*sessionStorage.getItem("coeff-bet-5"))}function b(){let e=+sessionStorage.getItem("current-bet"),t=[+sessionStorage.getItem("bet-1"),+sessionStorage.getItem("bet-2"),+sessionStorage.getItem("bet-3"),+sessionStorage.getItem("bet-4"),+sessionStorage.getItem("bet-5")];return e*t[0]+e*t[1]+e*t[2]+e*t[3]+e*t[4]}function f(){let e=[+sessionStorage.getItem("candy-1"),+sessionStorage.getItem("candy-2"),+sessionStorage.getItem("candy-3"),+sessionStorage.getItem("candy-4"),+sessionStorage.getItem("candy-5")].reduce(((e,t)=>e+t));return document.querySelector(".level__point_1").textContent=e,d(),e}const w={countRows:5,countCols:5,offsetBorder:10,gemSize:85,imagesCoin:[1,2,3,4,5],gemClass:"gem",gemIdPrefix:"gem",gameStates:["pick","switch","revert","remove","refill"],gameState:"",movingItems:0,countScore:0},p={selectedRow:-1,selectedCol:-1,posX:"",posY:""},E={container:document.createElement("div"),content:document.createElement("div"),wrapper:document.createElement("div"),gems:new Array};function h(){if(E.gems[_.row][_.col]==E.gems[_.row][_.col+1]){let e=E.gems[_.row][_.col]+1;if(E.gems[_.row][_.col+1]==E.gems[_.row][_.col+2]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision:document.getElementById(`gem_${_.row}_${_.col+2}`).dataset.collision&&(t=document.getElementById(`gem_${_.row}_${_.col+2}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row}_${_.col+2}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row}_${_.col+2}`).setAttribute("data-collision",t))}if(_.row<4&&E.gems[_.row][_.col]==E.gems[_.row+1][_.col]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision&&(t=document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",t))}if(_.row<4&&E.gems[_.row][_.col]==E.gems[_.row+1][_.col+1]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col+1}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col+1}`).dataset.collision&&(t=document.getElementById(`gem_${_.row+1}_${_.col+1}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col+1}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row}_${_.col+1}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col+1}`).setAttribute("data-collision",t))}}if(_.row<4&&E.gems[_.row][_.col]==E.gems[_.row+1][_.col]){let e=E.gems[_.row][_.col]+1;if(E.gems[_.row+1][_.col]==E.gems[_.row+1][_.col+1]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col+1}`).dataset.collision&&(t=document.getElementById(`gem_${_.row+1}_${_.col+1}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col+1}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col+1}`).setAttribute("data-collision",t))}if(_.col>0&&E.gems[_.row][_.col]==E.gems[_.row+1][_.col-1]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col-1}`).dataset.collision&&(t=document.getElementById(`gem_${_.row+1}_${_.col-1}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col-1}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col-1}`).setAttribute("data-collision",t))}if(_.row<3&&E.gems[_.row][_.col]==E.gems[_.row+2][_.col]){let t=0;document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision?t=document.getElementById(`gem_${_.row+1}_${_.col}`).dataset.collision:document.getElementById(`gem_${_.row+2}_${_.col}`).dataset.collision&&(t=document.getElementById(`gem_${_.row+2}_${_.col}`).dataset.collision),0==t?(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),document.getElementById(`gem_${_.row+2}_${_.col}`).setAttribute("data-collision",`${e}_${_.pin}`),_.pin++):(document.getElementById(`gem_${_.row}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+1}_${_.col}`).setAttribute("data-collision",t),document.getElementById(`gem_${_.row+2}_${_.col}`).setAttribute("data-collision",t))}}return _.col<4?_.col++:(_.col=0,_.row++),_.row>4&&0==_.col?(_.row=0,!1):h()}function L(e,t){let o=+t;1==o?sessionStorage.setItem("candy-1",+sessionStorage.getItem("candy-1")+e):2==o?sessionStorage.setItem("candy-2",+sessionStorage.getItem("candy-2")+e):3==o?sessionStorage.setItem("candy-3",+sessionStorage.getItem("candy-3")+e):4==o?sessionStorage.setItem("candy-4",+sessionStorage.getItem("candy-4")+e):5==o&&sessionStorage.setItem("candy-5",+sessionStorage.getItem("candy-5")+e),S(o),f()}function q(){let e=A();if(f()>99){let e=b();a(e,".check",500,1500),document.querySelector(".win__sub-text").textContent="Level completed!",document.querySelector(".win__text").textContent=e,setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),1e3)}else if(0==e&&0==+sessionStorage.getItem("bomb")&&0==+sessionStorage.getItem("magnite")){let e=b();e>0?(a(e,".check",500,1500),document.querySelector(".win__sub-text").textContent="You win!",document.querySelector(".win__text").textContent=e):(document.querySelector(".win__sub-text").textContent="You loose!",document.querySelector(".win").classList.add("_loose")),setTimeout((()=>{document.querySelector(".win").classList.add("_active")}),1e3)}else 0==e&&(+sessionStorage.getItem("bomb")>0||+sessionStorage.getItem("magnite")>0)&&document.querySelectorAll(".bonuses__image").forEach((e=>e.classList.add("_anim")))}function A(){let e=Array.from(document.querySelectorAll(".gem")),t=0;return e.forEach((e=>{if(e.dataset.collision)return t=1,t})),t}function v(e,t,o,s,n){let c=document.createElement("div");c.classList.add(w.gemClass),c.classList.add(`${w.gemClass}_${n}`),c.id=`${w.gemIdPrefix}_${o}_${s}`,c.style.top=`${e}px`,c.style.left=`${t}px`,c.style.backgroundImage=`url('img/game/icon-${n}.svg')`,c.setAttribute("data-number",n),E.wrapper.append(c)}function B(e,t){document.getElementById(`gem_${e}_${t}`).classList.add("remove"),E.gems[e][t]=-1,L(1,document.getElementById(`gem_${e}_${t}`).dataset.number),sessionStorage.setItem("current-destroy-candys",1),w.gameState=w.gameStates[3],k()}function T(){if(w.movingItems--,console.log(w.movingItems),0==w.movingItems)switch(w.gameState){case w.gameStates[3]:C();break;case w.gameStates[4]:!function(){let e=0;for(let t=0;t<w.countCols;t++)-1==E.gems[0][t]&&(E.gems[0][t]=Math.floor(5*Math.random()+0),v(0,t*w.gemSize,0,t,w.imagesCoin[E.gems[0][t]]),e++);e?(w.gameState=w.gameStates[3],C()):(w.gameState=w.gameStates[0],p.selectedRow=-1,setTimeout((()=>{document.querySelectorAll(".gem").forEach((e=>{e.dataset.collision&&e.removeAttribute("data-collision")})),h(),q()}),500))}()}}function k(){document.querySelectorAll(".remove").forEach((e=>{w.movingItems++,e.style.opacity="0",setTimeout((()=>{e.remove(),T()}),100)}))}function C(){let e=0;for(let t=0;t<w.countCols;t++)for(let o=w.countRows-1;o>0;o--)-1==E.gems[o][t]&&E.gems[o-1][t]>=0&&(document.querySelector("#"+w.gemIdPrefix+"_"+(o-1)+"_"+t).classList.add("fall"),document.querySelector("#"+w.gemIdPrefix+"_"+(o-1)+"_"+t).setAttribute("id",w.gemIdPrefix+"_"+o+"_"+t),E.gems[o][t]=E.gems[o-1][t],E.gems[o-1][t]=-1,e++);$(".fall").each((function(){w.movingItems++,$(this).animate({top:"+="+w.gemSize},{duration:100,complete:function(){$(this).removeClass("fall"),T()}})})),0==e&&(w.gameState=w.gameStates[4],w.movingItems=1,T())}if(document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&(!function(){s<=305?w.gemSize=45:s>320&&s<600?w.gemSize=66:s>600&&(w.gemSize=85);n<=600?w.gemSize=45:n>600&&n<720?w.gemSize=55:n>720&&n<900?w.gemSize=66:n>900&&(w.gemSize=85)}(),E.content.style.padding=w.offsetBorder+"px",E.content.style.width=w.gemSize*w.countCols+2*w.offsetBorder+"px",E.content.style.height=w.gemSize*w.countRows+2*w.offsetBorder+"px",E.content.classList.add("field__inner"),document.querySelector(".field__body").append(E.content),E.wrapper.classList.add("field__wrapper"),E.content.append(E.wrapper),function(){for(let e=0;e<w.countRows;e++){E.gems[e]=new Array;for(let t=0;t<w.countCols;t++)E.gems[e][t]=-1}for(let e=0;e<w.countRows;e++)for(let t=0;t<w.countCols;t++)E.gems[e][t]=Math.floor(5*Math.random()+0),v(e*w.gemSize,t*w.gemSize,e,t,w.imagesCoin[E.gems[e][t]])}(),w.gameState=w.gameStates[0],l(+sessionStorage.getItem("current-bet"),".check"),w.countScore=0,document.querySelector(".bonuses__count_1").textContent=sessionStorage.getItem("bomb"),document.querySelector(".bonuses__count_2").textContent=sessionStorage.getItem("magnite"),sessionStorage.setItem("candy-1",0),sessionStorage.setItem("candy-2",0),sessionStorage.setItem("candy-3",0),sessionStorage.setItem("candy-4",0),sessionStorage.setItem("candy-5",0),h(),q()),document.querySelector(".main")||document.querySelector(".game")){const e=new Audio;e.preload="auto",e.src="files/audio_bg.mp3",e.loop=[!0],e.volume=.3,document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.volume=0:o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&(e.volume=.3,e.play()),o.closest(".volume").classList.toggle("_hide"))}))}document.addEventListener("click",(e=>{let s=e.target,n=+sessionStorage.getItem("money");if(s.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active")),s.closest(".footer-main__button_bet")&&document.querySelector(".main__content").classList.add("_bet"),s.closest(".footer-main__button_shop")&&(document.querySelector(".main__content").classList.add("_shop"),document.querySelector(".main__hero-image").classList.add("_hide"),document.querySelector(".header__body").classList.add("_shop")),s.closest(".header__button-back")&&(document.querySelector(".main__content").classList.remove("_shop"),document.querySelector(".main__hero-image").classList.remove("_hide"),document.querySelector(".header__body").classList.remove("_shop")),s.closest(".bet-main__close-icon")){document.querySelector(".main__content").classList.remove("_bet");let e=[];c.forEach((t=>{t.checked&&e.push(t.value)})),0==e.length&&(sessionStorage.setItem("current-bet",100),document.querySelectorAll(".bet-main__input")[0].checked=!0)}if(s.closest(".bet-main__bets")&&(c.forEach((e=>{e.checked&&+e.value!=+s.closest(".bet-main__item").dataset.val&&(e.checked=!1)})),sessionStorage.setItem("current-bet",s.closest(".bet-main__item").dataset.val)),s.closest(".shop__button_1")&&(n>=u?(l(u,".check"),sessionStorage.setItem("bomb",+sessionStorage.getItem("bomb")+1),document.querySelector(".shop__image_1").classList.add("_anim"),setTimeout((()=>{document.querySelector(".shop__image_1").classList.remove("_anim")}),1e3)):m(".check")),s.closest(".shop__button_2")&&(n>=g?(l(g,".check"),sessionStorage.setItem("magnite",+sessionStorage.getItem("magnite")+1),document.querySelector(".shop__image_2").classList.add("_anim"),setTimeout((()=>{document.querySelector(".shop__image_2").classList.remove("_anim")}),1e3)):m(".check")),!s.closest(".gem")||document.querySelector(".bonuses__item_1").classList.contains("_anim")||document.querySelector(".bonuses__item_2").classList.contains("_anim")||(!function(e){let t=0;if(!e.dataset.collision){let e=0;return document.querySelectorAll(".gem").forEach((t=>{t.dataset.collision&&(e=t.dataset.collision)})),document.querySelectorAll(".gem").forEach((t=>{t.dataset.collision==e&&t.classList.add("_anim"),setTimeout((()=>{t.classList.remove("_anim")}),1e3)})),!1}t=e.dataset.collision,document.querySelectorAll(".gem").forEach((e=>{if(e.dataset.collision&&e.dataset.collision==t){let t=parseInt(e.getAttribute("id").split("_")[1]),o=parseInt(e.getAttribute("id").split("_")[2]);E.gems[t][o]=-1,e.classList.add("remove")}}));let o=0;document.querySelectorAll(".gem").forEach((e=>{e.classList.contains("remove")&&o++}));let s=parseInt(t.split("_")[0]);L(o,s),sessionStorage.setItem("current-destroy-candys",o),w.gameState=w.gameStates[3],k()}(s.closest(".gem")),document.querySelector(".field__wrapper").classList.add("_hold"),setTimeout((()=>{document.querySelector(".field__wrapper").classList.remove("_hold")}),550)),s.closest(".win__button_play")&&(_.pin=0,y(),document.querySelectorAll(".gem").forEach((e=>{let t=parseInt(e.getAttribute("id").split("_")[1]),o=parseInt(e.getAttribute("id").split("_")[2]);E.gems[t][o]=-1,e.classList.add("remove")})),w.gameState=w.gameStates[3],k(),l(+sessionStorage.getItem("current-bet"),".check"),setTimeout((()=>{document.querySelector(".win").classList.remove("_active")}),100),setTimeout((()=>{document.querySelector(".win").classList.contains("_loose")&&document.querySelector(".win").classList.remove("_loose")}),500)),(s.closest(".win__button_home")||s.closest(".bonuses__button-back"))&&y(),s.closest(".bonuses__item_1")&&0!=+sessionStorage.getItem("bomb")&&(sessionStorage.setItem("bomb",+sessionStorage.getItem("bomb")-1),s.closest(".bonuses__item_1").classList.add("_anim")),s.closest(".bonuses__item_2")&&0!=+sessionStorage.getItem("magnite")&&(sessionStorage.setItem("magnite",+sessionStorage.getItem("magnite")-1),s.closest(".bonuses__item_2").classList.add("_anim")),s.closest(".gem")&&document.querySelector(".bonuses__item_1").classList.contains("_anim")){!function(e){w.movingItems++,document.querySelector(".bonuses__item_1").classList.remove("_anim");let t,o,s,n,c,l,m,i,a=parseInt(e.getAttribute("id").split("_")[1]),r=parseInt(e.getAttribute("id").split("_")[2]);a>0&&a<4&&r>0&&r<4&&(t=a-1,o=r,s=a,n=r-1,c=a,l=r+1,m=a+1,i=r),0==a&&r>0&&r<4&&(s=a,n=r-1,c=a,l=r+1,m=a+1,i=r),0==a&&0==r&&(c=a,l=r+1,m=a+1,i=r),0==a&&4==r&&(s=a,n=r-1,m=a+1,i=r),a>0&&a<4&&0==r&&(t=a-1,o=r,c=a,l=r+1,m=a+1,i=r),a>0&&a<4&&4==r&&(t=a-1,o=r,s=a,n=r-1,m=a+1,i=r),4==a&&r>0&&r<4&&(t=a-1,o=r,s=a,n=r-1,c=a,l=r+1),4==a&&0==r&&(t=a-1,o=r,c=a,l=r+1),4==a&&4==r&&(t=a-1,o=r,s=a,n=r-1),document.getElementById(`gem_${a}_${r}`)&&(document.getElementById(`gem_${a}_${r}`).classList.add("_bomb"),setTimeout((()=>{B(a,r),document.getElementById(`gem_${a}_${r}`).remove()}),500)),document.getElementById(`gem_${t}_${o}`)&&(document.getElementById(`gem_${t}_${o}`).classList.add("_bomb"),setTimeout((()=>{B(t,o),document.getElementById(`gem_${t}_${o}`).remove()}),500)),document.getElementById(`gem_${s}_${n}`)&&(document.getElementById(`gem_${s}_${n}`).classList.add("_bomb"),setTimeout((()=>{B(s,n),document.getElementById(`gem_${s}_${n}`).remove()}),500)),document.getElementById(`gem_${c}_${l}`)&&(document.getElementById(`gem_${c}_${l}`).classList.add("_bomb"),setTimeout((()=>{B(c,l),document.getElementById(`gem_${c}_${l}`).remove()}),500)),document.getElementById(`gem_${m}_${i}`)&&(document.getElementById(`gem_${m}_${i}`).classList.add("_bomb"),setTimeout((()=>{B(m,i),document.getElementById(`gem_${m}_${i}`).remove()}),500)),setTimeout((()=>{w.gameState=w.gameStates[3],T()}),500)}(s.closest(".gem")),document.querySelector(".bonuses__count_1").textContent=sessionStorage.getItem("bomb")}if(s.closest(".gem")&&document.querySelector(".bonuses__item_2").classList.contains("_anim")&&!document.querySelector(".field__wrapper").classList.contains("_magnite")){let e=s.closest(".gem");e.classList.add("_magnite"),document.querySelector(".field__wrapper").classList.add("_hold"),setTimeout((()=>{document.querySelector(".field__wrapper").classList.add("_magnite"),document.querySelector(".field__wrapper").classList.remove("_hold")}),500)}if(s.closest(".gem")&&document.querySelector(".bonuses__item_2").classList.contains("_anim")&&document.querySelector(".field__wrapper").classList.contains("_magnite")){!function(e){let t="",o=0;document.querySelectorAll(".gem").forEach((e=>{e.classList.contains("_magnite")&&(t=e,o=+e.dataset.number)}));let s=parseInt(t.getAttribute("id").split("_")[1]),n=parseInt(t.getAttribute("id").split("_")[2]),c=parseInt(e.getAttribute("id").split("_")[1]),l=parseInt(e.getAttribute("id").split("_")[2]),m=+e.dataset.number;t.style.backgroundImage=`url('img/game/icon-${m}.svg')`,t.classList.remove(`gem_${o}`),t.classList.add(`gem_${m}`),t.dataset.number=m,e.style.backgroundImage=`url('img/game/icon-${o}.svg')`,e.classList.remove(`gem_${m}`),e.classList.add(`gem_${o}`),e.dataset.number=o,E.gems[c][l]=o-1,E.gems[s][n]=m-1,document.querySelectorAll(".gem").forEach((e=>{e.classList.contains("_magnite")&&e.classList.remove("_magnite")})),document.querySelector(".bonuses__item_2").classList.remove("_anim"),setTimeout((()=>{document.querySelector(".field__wrapper").classList.remove("_magnite")}),500),document.querySelectorAll(".gem").forEach((e=>{e.dataset.collision&&e.removeAttribute("data-collision")})),setTimeout((()=>{h()}),100)}(s.closest(".gem")),document.querySelector(".bonuses__count_2").textContent=sessionStorage.getItem("magnite")}if(s.closest(".bonuses__buttons")){0==A()&&document.querySelector(".bonuses__image").classList.contains("_anim")&&document.querySelectorAll(".bonuses__image").forEach((e=>e.classList.remove("_anim")))}})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();